buildscript {
    ext {
        springBootVersion = '2.0.2.RELEASE'
    }
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
    }
}

plugins {
    id 'io.franzbecker.gradle-lombok' version '1.11'
}

lombok {
    version = "1.16.22"
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'
apply plugin: "jacoco"

jacoco {
    toolVersion = "0.8.1"
    reportsDir = file("$buildDir/customJacocoReportDir")
}

jacocoTestReport {
    executionData fileTree(project.rootDir.absolutePath).include("**/build/jacoco/*.exec")

    reports {
        xml.enabled  true
        xml.destination file("${buildDir}/reports/coverage.xml")
        csv.enabled false
        html.enabled false
        html.destination file("${buildDir}/reports/html")
    }

    dependsOn(test)
}

group = 'jp.co.soramitsu.sora'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

ext {
    lombokVersion = '1.18.0'
    springSwaggerVersion = '2.8.0'
    commonsLangVersion = '3.7'
    spongycastleVersion = '1.58.0.0'
    mockitoCoreVersion = '2.18.3'
    junitVersion = '4.12'
    embeddedPg = "0.12.0"
    hibernateTypesVersion = "2.2.2"
}

repositories {
    jcenter()
    maven { url "https://jitpack.io" }
}

dependencies {
    compile('org.springframework.boot:spring-boot-starter-data-jpa')
    compile 'com.github.warchant:ed25519-sha3-java:1.0'

    //compile('org.springframework.boot:spring-boot-starter-data-jpa')
    compile('org.springframework.boot:spring-boot-starter-validation')
    compile('org.springframework.boot:spring-boot-starter-web')
    compile("io.springfox:springfox-swagger2:${springSwaggerVersion}")
    compile("io.springfox:springfox-swagger-ui:${springSwaggerVersion}")
    compile("org.apache.commons:commons-lang3:${commonsLangVersion}")
    // Handy library which allows to map json/jsonb columns to java type on in entity column!!
    // https://github.com/vladmihalcea/hibernate-types
    compile("com.vladmihalcea:hibernate-types-52:${hibernateTypesVersion}")
    compile('org.postgresql:postgresql:42.1.4')

    compileOnly "org.springframework.boot:spring-boot-configuration-processor"

    testCompile("org.mockito:mockito-core:${mockitoCoreVersion}")
    testCompile('org.springframework.boot:spring-boot-starter-test')
    testCompile("junit:junit:${junitVersion}")
    // Allows using embedded postgres in Unit tests
    // https://github.com/opentable/otj-pg-embedded
    testCompile 'org.testcontainers:testcontainers:1.7.3'
    testCompile 'org.testcontainers:postgresql:1.7.3'
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.8'
}
